import{_ as L}from"./ShowImages-DKIio2Jt.js";import{_ as O}from"./imageInput-BrSUNGmK.js";import{n as J,s as M,f as P,a as q}from"./apiService-CZ-wSF5A.js";import{D as H,E as j,r as m,H as g,J as w,c as e,K as n,L as D,N as o,M as _,O as b,C as K,x as W,P as $,V as G,R as Q,F as X}from"./index-BJpE3kbW.js";import{V as Y,q as N,s as h}from"./VGrid-TC4GR9IH.js";import{V as Z}from"./VForm-BDj5ARjf.js";import{a as ee,V as y}from"./VRow-Bj3JPlJ0.js";import{V as C}from"./VTextField-DOljvp2c.js";import{a as A}from"./VDialog-0qiWlNnz.js";import{_ as te}from"./ThemeSettings-CB5Nh8vY.js";import{_ as le}from"./Breadcrumbs-B0GMhcaR.js";import{V as oe}from"./VTable-GK40EMjv.js";import{V as ne}from"./VContainer-XAdDcy6U.js";import"./VInput-C-DQ_oGG.js";import"./VChip-WVtnRdx6.js";import"./VColorPicker-LYa8euCb.js";import"./VSwitch-ComJYlaU.js";import"./VSelectionControl-BptT3_7M.js";const ae={class:"ma-5"},se={__name:"ProjectForm",emits:["runItems"],setup(B,{expose:F,emit:I}){const{xs:v}=H(),d=j(),x=I,p=m(!1),r=m({}),u=m({}),c=m({});function V(){u.value={ar:"",en:""},c.value={ar:"",en:""},r.value.id="",p.value=!1,x("runItems")}function S(l){return l.startsWith("https://")?l:"https://"+l}function T(l){const t=new FormData;t.append("title",JSON.stringify(u.value)),t.append("description",JSON.stringify(c.value)),t.append("url",S(r.value.url)),t.append("user_id",d.user.id),l.length&&l.forEach(f=>{t.append("photos[]",f,f.name)}),r.value.id&&t.append("_method","put"),M("projects",t,r.value.id).then(f=>{r.value=f.data,x("runItems"),V()})}const k=m(null),U=()=>{if(console.log(d.loadengApi),d.loadengApi=!0,!u.value.ar&&!u.value.en){J("حقل العنوان مطلوب عربي او انجليزي");return}console.log(d.loadengApi),k.value&&(console.log(d.loadengApi),k.value.compressImages().then(l=>{console.log(l),T(l)}))},i=(l={})=>{Object.keys(l).length!==0&&(u.value=l.title,c.value=l.description),p.value=!0,r.value=l};return F({addNew:i}),(l,t)=>{const f=O;return g(),w("div",null,[e(Y,{onClick:t[0]||(t[0]=a=>i()),color:"info",size:"35",icon:"mdi-plus-outline"}),e(A,{class:"text-center",modelValue:p.value,"onUpdate:modelValue":t[6]||(t[6]=a=>p.value=a),"max-width":"900",fullscreen:b(v)},{default:n(()=>[e(N,{class:"pa-5"},{actions:n(()=>[e(h,{onClick:V},{default:n(()=>[D(" اغلاق ")]),_:1}),e(h,{onClick:U},{default:n(()=>[D(" موافق ")]),_:1})]),default:n(()=>[o("h2",ae,_(r.value.id?"تعديل ":" اضافة "),1),e(Z,null,{default:n(()=>[e(ee,null,{default:n(()=>[e(y,{cols:"12",md:"6"},{default:n(()=>[e(C,{modelValue:u.value.ar,"onUpdate:modelValue":t[1]||(t[1]=a=>u.value.ar=a),label:"العنوان"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"6"},{default:n(()=>[e(C,{modelValue:u.value.en,"onUpdate:modelValue":t[2]||(t[2]=a=>u.value.en=a),label:"title"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"6"},{default:n(()=>[e(C,{modelValue:c.value.ar,"onUpdate:modelValue":t[3]||(t[3]=a=>c.value.ar=a),label:"الوصف"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"6"},{default:n(()=>[e(C,{modelValue:c.value.en,"onUpdate:modelValue":t[4]||(t[4]=a=>c.value.en=a),label:"description"},null,8,["modelValue"])]),_:1}),e(y,{cols:"12",md:"6"},{default:n(()=>[e(C,{modelValue:r.value.url,"onUpdate:modelValue":t[5]||(t[5]=a=>r.value.url=a),label:"URL"},null,8,["modelValue"])]),_:1}),e(f,{ref_key:"imageInputRef",ref:k,isMultiple:!0},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}},ue=o("h2",{class:"ma-5"},"هل تريد حذف العنصر بالفعل",-1),re=o("thead",null,[o("tr",null,[o("th",{class:"text-center"},"#"),o("th",{class:"text-center"},"العنوان"),o("th",{class:"text-center"},"title"),o("th",{class:"text-center"},"الوصف"),o("th",{class:"text-center"},"description"),o("th",{class:"text-center"},"URL"),o("th",{class:"text-center"},"تاريخ الانشاء"),o("th",{class:"text-center sticky-column"},". . .")])],-1),ie={class:"sticky-column"},me={key:1,class:"text-alert"},Se={__name:"index",setup(B){const F=K(),I=j(),v=m(!1),d=m([]),x=m(""),p=m(null);function r(){p.value?p.value.opendialogThemeForm():console.error("opendialogThemeForm is not a function")}W(()=>{V()});const u=m(null),c=i=>{u.value.opaenDialog(i)};function V(){I.loadengApi=!0,P("projects").then(i=>{d.value=i.data,x.value=""})}function S(i){v.value=!0,x.value=i}function T(){I.loadengApi=!0,q("projects/delete",{id:[x.value.id]}).then(()=>{V(),v.value=!1})}const k=m(null),U=i=>{var l;(l=k.value)==null||l.addNew(i)};return(i,l)=>{const t=le,f=te,a=se,E=L;return g(),$(ne,null,{default:n(()=>[e(t),e(A,{class:"text-center",modelValue:v.value,"onUpdate:modelValue":l[1]||(l[1]=s=>v.value=s),"max-width":"400",persistent:""},{default:n(()=>[e(N,{class:"pa-5"},{default:n(()=>[ue,e(h,{class:"ma-1",onClick:T},{default:n(()=>[D(" موافق ")]),_:1}),e(h,{class:"ma-1",onClick:l[0]||(l[0]=s=>v.value=!1)},{default:n(()=>[D(" اغلاق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(N,{"max-width":"500px",class:"text-center my-5 mx-auto",subtitle:b(F).meta.description,title:b(F).meta.title},{append:n(()=>[b(I).user?(g(),$(f,{key:0,ref_key:"dialogThemeForm",ref:p,detTheme:{nameEn:"projects",nameAr:"المشاريع"},onClick:r},null,512)):G("",!0)]),prepend:n(()=>[e(a,{ref_key:"itemForm",ref:k,onRunItems:V},null,512)]),_:1},8,["subtitle","title"]),e(E,{ref_key:"isShowImage",ref:u,onRunItems:V},null,512),d.value.length>0?(g(),$(oe,{key:0,style:{"white-space":"nowrap"},dir:"rtl",class:"h"},{default:n(()=>[re,o("tbody",null,[(g(!0),w(X,null,Q(d.value,(s,z)=>(g(),w("tr",{key:s.id},[o("td",null,_(z+1),1),o("td",null,_(s.title.ar),1),o("td",null,_(s.title.en),1),o("td",null,_(s.description.ar),1),o("td",null,_(s.description.en),1),o("td",null,_(s.url),1),o("td",null,_(s.created_at),1),o("td",ie,[e(h,{onClick:R=>c(s.photos),icon:"mdi-image-edit-outline",color:"info",size:"small"},null,8,["onClick"]),e(h,{onClick:R=>S(s),class:"mx-3",icon:"mdi-delete",color:"red",size:"small"},null,8,["onClick"]),e(h,{onClick:R=>U(s),icon:"mdi-square-edit-outline",color:"info",size:"small"},null,8,["onClick"])])]))),128))])]),_:1})):(g(),w("p",me,"لا توجد اي بيانات"))]),_:1})}}};export{Se as default};
