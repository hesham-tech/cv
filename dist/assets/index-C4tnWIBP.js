import{_ as A}from"./imageInput-YKunE6mm.js";import{n as N}from"./notifyService-CNC34UEL.js";import{s as q,f as L,d as M}from"./VSwitch-CY7knEPo.js";import{D as j,E as B,r as i,H as y,J as D,c as e,K as n,L as S,N as t,M as u,O as R,x as H,P as T,V as K,R as P,F as G}from"./index-DbDDuBWN.js";import{V as Q,q as E,s as k}from"./VGrid-Be2Vd0tC.js";import{V as W}from"./VForm-CMIPxKbd.js";import{a as X,V as v}from"./VRow-DMBw_nzf.js";import{V as _}from"./VTextField-BFvOucwX.js";import{a as O}from"./VDialog-DFqHZMP4.js";import{_ as Y}from"./ShowImages-Dy3IMzpY.js";import{_ as Z}from"./ThemeSettings-CUVLgwMk.js";import{_ as ee}from"./Breadcrumbs-DzoDPdLB.js";import{V as le}from"./VTable-B_NV7ro-.js";import{V as te}from"./VContainer-_MjNHFak.js";import"./VInput-DYP2PKDW.js";import"./VChip-CrQwxtcH.js";import"./VSelectionControl-DHOdnSA5.js";const ae={class:"ma-5"},ne={__name:"CredentialForm",emits:["runItems"],setup(z,{expose:I,emit:b}){const{xs:g}=j(),C=B(),h=b,V=i(!1),o=i({}),r=i({}),m=i({}),d=i({});function w(){r.value={ar:"",en:""},m.value={ar:"",en:""},d.value={ar:"",en:""},o.value={credential_id:"",issue_date:"",expiry_date:!1,id:null},V.value=!1,h("runItems")}function U(c){const l=new FormData;l.append("name",JSON.stringify(r.value)),l.append("issuer",JSON.stringify(m.value)),l.append("description",JSON.stringify(d.value)),l.append("credential_id",o.value.credential_id),l.append("issue_date",o.value.issue_date),l.append("expiry_date",o.value.expiry_date||""),l.append("user_id",C.user.id),c.length&&c.forEach(x=>{l.append("photos[]",x,x.name)}),o.value.id&&l.append("_method","put"),q("credentials",l,o.value.id).then(x=>{o.value=x.data,h("runItems"),w()})}const F=i(null),p=()=>{if(!r.value.ar&&!r.value.en){N("حقل الاسم مطلوب عربي او انجليزي");return}if(!m.value.ar&&!m.value.en){N("حقل اسم المنظمة مطلوب عربي او انجليزي");return}if(!o.value.issue_date){N("حقل تاريخ الاصدار مطلوب ");return}F.value&&F.value.compressImages()},f=(c={})=>{Object.keys(c).length!==0&&(r.value=c.name,m.value=c.issuer,d.value=c.description),V.value=!0,o.value=c};return I({addNew:f}),(c,l)=>{const x=A;return y(),D("div",null,[e(Q,{onClick:l[0]||(l[0]=a=>f()),color:"info",size:"35",icon:"mdi-plus-outline"}),e(O,{class:"text-center",modelValue:V.value,"onUpdate:modelValue":l[10]||(l[10]=a=>V.value=a),"max-width":"900",fullscreen:R(g)},{default:n(()=>[e(E,{class:"pa-5"},{actions:n(()=>[e(k,{onClick:w},{default:n(()=>[S(" اغلاق ")]),_:1}),e(k,{onClick:p},{default:n(()=>[S(" موافق ")]),_:1})]),default:n(()=>[t("h2",ae,u(o.value.id?"تعديل ":" اضافة "),1),e(W,null,{default:n(()=>[e(X,null,{default:n(()=>[e(v,{cols:"12",md:"6"},{default:n(()=>[e(_,{modelValue:r.value.ar,"onUpdate:modelValue":l[1]||(l[1]=a=>r.value.ar=a),label:" الاسم "},null,8,["modelValue"])]),_:1}),e(v,{cols:"12",md:"6"},{default:n(()=>[e(_,{modelValue:r.value.en,"onUpdate:modelValue":l[2]||(l[2]=a=>r.value.en=a),label:"Name"},null,8,["modelValue"])]),_:1}),e(v,{cols:"12",md:"6"},{default:n(()=>[e(_,{modelValue:m.value.ar,"onUpdate:modelValue":l[3]||(l[3]=a=>m.value.ar=a),label:" اسم المنظمة "},null,8,["modelValue"])]),_:1}),e(v,{cols:"12",md:"6"},{default:n(()=>[e(_,{modelValue:m.value.en,"onUpdate:modelValue":l[4]||(l[4]=a=>m.value.en=a),label:"Issuer"},null,8,["modelValue"])]),_:1}),e(v,{cols:"12",md:"6"},{default:n(()=>[e(_,{modelValue:d.value.ar,"onUpdate:modelValue":l[5]||(l[5]=a=>d.value.ar=a),label:" الوصف "},null,8,["modelValue"])]),_:1}),e(v,{cols:"12",md:"6"},{default:n(()=>[e(_,{modelValue:d.value.en,"onUpdate:modelValue":l[6]||(l[6]=a=>d.value.en=a),label:"Description"},null,8,["modelValue"])]),_:1}),e(v,{cols:"12",md:"6"},{default:n(()=>[e(_,{modelValue:o.value.credential_id,"onUpdate:modelValue":l[7]||(l[7]=a=>o.value.credential_id=a),label:"الرقم التعريفي"},null,8,["modelValue"])]),_:1}),e(v,{cols:"12",md:"6"},{default:n(()=>[e(_,{type:"date",modelValue:o.value.issue_date,"onUpdate:modelValue":l[8]||(l[8]=a=>o.value.issue_date=a),label:"تاريخ الإصدار  "},null,8,["modelValue"])]),_:1}),e(v,{cols:"12",md:"6"},{default:n(()=>[e(_,{type:"date",modelValue:o.value.expiry_date,"onUpdate:modelValue":l[9]||(l[9]=a=>o.value.expiry_date=a),label:"تاريخ الانتهاء"},null,8,["modelValue"])]),_:1}),e(x,{ref_key:"imageInputRef",ref:F,onSaveCompressedImages:U},null,512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}},oe=t("h2",{class:"ma-5"},"هل تريد حذف العنصر بالفعل",-1),se=t("thead",null,[t("tr",null,[t("th",{class:"text-center"},"#"),t("th",{class:"text-center"},"الاسم"),t("th",{class:"text-center"},"name"),t("th",{class:"text-center"},"اسم المنظمة"),t("th",{class:"text-center"},"issuer"),t("th",{class:"text-center"},"الوصف"),t("th",{class:"text-center"},"Description"),t("th",{class:"text-center"},"تاريخ الإصدار"),t("th",{class:"text-center"},"تاريخ انتهاء"),t("th",{class:"text-center"},"الرقم التعريفي للشهادة"),t("th",{class:"text-center"},"صورة"),t("th",{class:"text-center"},"تاريخ الإنشاء"),t("th",{class:"text-center sticky-column"},". . .")])],-1),ue={class:"sticky-column"},re={key:2,class:"text-alert"},be={__name:"index",setup(z){const I=B(),b=i(null),g=i(!1),C=i([]),h=i(""),V=i(null);function o(){V.value?V.value.opendialogThemeForm():console.error("opendialogThemeForm is not a function")}const r=i(null),m=p=>{r.value.opaenDialog(p)};H(()=>{d()});function d(){I.loadengApi=!0,L("credentials").then(p=>{C.value=p.data,h.value=""})}function w(p){g.value=!0,h.value=p}function U(){I.loadengApi=!0,M("credentials/delete",{id:[h.value.id]}).then(()=>{d(),g.value=!1})}const F=p=>{var f;(f=b.value)==null||f.addNew(p)};return(p,f)=>{const c=ee,l=Z,x=Y,a=ne;return y(),T(te,null,{default:n(()=>[e(c),e(O,{class:"text-center",modelValue:g.value,"onUpdate:modelValue":f[1]||(f[1]=s=>g.value=s),"max-width":"400",persistent:""},{default:n(()=>[e(E,{class:"pa-5"},{default:n(()=>[oe,e(k,{class:"ma-1",onClick:U},{default:n(()=>[S(" موافق ")]),_:1}),e(k,{class:"ma-1",onClick:f[0]||(f[0]=s=>g.value=!1)},{default:n(()=>[S(" اغلاق ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),R(I).user?(y(),T(l,{key:0,ref_key:"dialogThemeForm",ref:V,detTheme:{nameEn:"credentials",nameAr:"الشهادات"},onClick:o},null,512)):K("",!0),e(x,{ref_key:"isShowImage",ref:r,onRunItems:d},null,512),e(a,{ref_key:"itemForm",ref:b,onRunItems:d},null,512),C.value.length>0?(y(),T(le,{key:1,style:{"white-space":"nowrap"},dir:"rtl",class:"h"},{default:n(()=>[se,t("tbody",null,[(y(!0),D(G,null,P(C.value,(s,J)=>(y(),D("tr",{key:s.id},[t("td",null,u(J+1),1),t("td",null,u(s.name.ar),1),t("td",null,u(s.name.en),1),t("td",null,u(s.issuer.ar),1),t("td",null,u(s.issuer.en),1),t("td",null,u(s.description.ar),1),t("td",null,u(s.description.en),1),t("td",null,u(s.issue_date),1),t("td",null,u(s.expiry_date),1),t("td",null,u(s.credential_id),1),t("td",null,u(s.image),1),t("td",null,u(s.created_at),1),t("td",ue,[e(k,{onClick:$=>m(s.photos),icon:"mdi-image-edit-outline",color:"info",size:"small"},null,8,["onClick"]),e(k,{onClick:$=>w(s),class:"mx-3",icon:"mdi-delete",color:"red",size:"small"},null,8,["onClick"]),e(k,{onClick:$=>F(s),icon:"mdi-square-edit-outline",color:"info",size:"small"},null,8,["onClick"])])]))),128))])]),_:1})):(y(),D("p",re,"لا توجد اي بيانات"))]),_:1})}}};export{be as default};
